<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">
  <link rel="icon" href="https://getbootstrap.com/docs/4.0/assets/img/favicons/favicon.ico">
  <title>Item List</title>
  <link rel="canonical" href="https://getbootstrap.com/docs/4.0/examples/carousel/">
  <link href="https://getbootstrap.com/docs/4.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="carousel.css" rel="stylesheet">
  <style>
    .logo-size {
      width: 100px;
      height: 100px;
      object-fit: cover;
    }
  </style>
</head>
<body>
  <div class="wrapper">
    <div class="container">
      <div class="row">
        <div class="col-md-6 mb-5">
          <h2 class="font-weight-bold text-dark">VMS Hacker</h2>
          <p>Bang Song Thong<br>Smaut Parakran<br>Thailand<br>3000</p>
          <span><img src="phone.svg" alt=""/>0809742960</span><br>
          <span><img src="iphone.svg" alt=""/>960495000</span>
        </div>
        <div class="col-md-6 text-right">
          <h2 class="font-weight-bold text-dark">Accessory Shop</h2>
          <img class="rounded-circle img-fluid logo-size" src="vms.jpg" alt="" />
        </div>
      </div>
      <div class="row mb-5">
        <div class="col-md-4">
          <h2 class="font-weight-bold">Customer to : </h2>
          <span class="font-weight-bold">Customer name 1</span><br>
          <span>Customer name 2</span><br>
          <span>Customer name 3</span><br>
          <span>Customer name 4</span>
        </div>
        <div class="col-md-4">
          <h2 class="font-weight-bold">Shipping to : </h2>
          <span class="font-weight-bold">Address Line 1</span><br>
          <span>Address Line 2</span><br>
          <span>Address Line 3</span><br>
          <span>Address Line 4</span>
        </div>
        <div class="col-md-4 ">
          <p>2010/6/67</p>
        </div>
      </div>
      <div class="row">
        <div class="col-12 text-left">
          <button type="button" class="btn btn-outline-info" data-toggle="modal" data-target="#add-modal">Add Item</button>
        </div>
        <div class="modal fade" role="dialog" id="add-modal">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h2>Add Item Modal</h2>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
              </div>
              <div class="modal-body">
                <form>
                  <div class="form-group row">
                    <label for="itemDescription" class="col-sm-4 col-form-label">Item Description</label>
                    <div class="col-sm-8">
                      <input type="text" name="description" class="form-control" id="itemDescription" />
                    </div>
                  </div>
                  <div class="form-group row">
                    <label for="itemQuantity" class="col-sm-4 col-form-label">Item Quantity</label>
                    <div class="col-sm-8">
                      <input type="text" name="quantity" class="form-control" id="itemQuantity" />
                    </div>
                  </div>
                  <div class="form-group row">
                    <label for="unitPrice" class="col-sm-4 col-form-label">Unit Price</label>
                    <div class="col-sm-8">
                      <input type="text" name="price" class="form-control" id="unitPrice" />
                    </div>
                  </div>
                  <div class="col-md-12 text-center">
                    <button class="btn btn-outline-info" type="button" id="btn-add">Add</button>
                  </div>
                </form>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-outline-secondary" data-dismiss="modal">Close</button>
              </div>
            </div>
          </div>
        </div>
        <hr>
        <table class="table my-5">
          <thead>
            <tr>
              <th>Item Description</th>
              <th>Item Quantity</th>
              <th>Unit Price</th>
              <th>Amount</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
          </tbody>
        </table>

        <div class="col-md-12 my-4 text-right">
          <div class="invoice-totals">
            <h4>Invoice Totals</h4>
            <div><strong>Gross Price :</strong> <span id="totalAmount">0.00</span></div>
            <div><strong>VAT (7%):</strong> <span id="vatAmount">0.00</span></div>
            <div><strong>Total Price:</strong> <span id="totalAfterVat">0.00</span></div>
          </div>
        </div>
        
      </div>
        
      <div class="row">
        <div class="col">
          <span class="font-weight-bold text-dark">Make all charges payable to : </span><br>
          <span class="font-italic">Your Company Here</span>
          <p class="font-weight-bold text-dark">If you have any question concerning this invoices</p>
          <span class="font-weight-bold text-dark">THANK YOU FOR YOUR BUSINESS</span>
          <p>Who are you</p>
        </div>
      </div>
    </div>
  </div>
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script>window.jQuery || document.write('<script src="https://getbootstrap.com/docs/4.0/assets/js/vendor/jquery-slim.min.js"><\/script>')</script>
  <script src="https://getbootstrap.com/docs/4.0/assets/js/vendor/popper.min.js"></script>
  <script src="https://getbootstrap.com/docs/4.0/dist/js/bootstrap.min.js"></script>
  <script src="data.js"></script> 
  <script>
    $(function() {
      let totalAmount = 0;
      let vatAmount = 0;
      let totalAfterVat = 0;

      function calculateInvoiceTotals() {
        totalAmount = 0;
        $('tbody tr').each(function() {
          const quantity = parseInt($(this).find('td:nth-child(2)').text());
          const price = parseFloat($(this).find('td:nth-child(3)').text());
          const amount = quantity * price;
          totalAmount += amount;
        });

        vatAmount = 0.07 * totalAmount;
        totalAfterVat = totalAmount + vatAmount;

        $('#totalAmount').text(totalAmount.toFixed(2));
        $('#vatAmount').text(vatAmount.toFixed(2));
        $('#totalAfterVat').text(totalAfterVat.toFixed(2));
      }

      function loadItems() {
        const items = JSON.parse(localStorage.getItem('items')) || [];
        const tbody = $('tbody');
        tbody.empty();
        items.forEach((item, index) => {
          const tr = '<tr data-index="' + index + '">' +
            '<td>' + item.description + '</td>' +
            '<td>' + item.quantity + '</td>' +
            '<td>' + item.price + '</td>' +
            '<td>' + (item.quantity * item.price) + '</td>' +
            '<td><button class="btn btn-danger btn-sm btn-delete">Delete</button></td>' +
            '</tr>';
          tbody.append(tr);
        });
        calculateInvoiceTotals();
      }

      function saveItem(item) {
        const items = JSON.parse(localStorage.getItem('items')) || [];
        items.push(item);
        localStorage.setItem('items', JSON.stringify(items));
        loadItems();
      }

      function deleteItem(index) { 
        let items = JSON.parse(localStorage.getItem('items')) || [];
        items.splice(index, 1);
        localStorage.setItem('items', JSON.stringify(items));
        loadItems();
      }

      $('#btn-add').click(function() {
        const description = $('input[name="description"]').val();
        const quantity = $('input[name="quantity"]').val();
        const price = $('input[name="price"]').val();

        const item = { description, quantity, price };
        saveItem(item);

        $('input[name="description"]').val('');
        $('input[name="quantity"]').val('');
        $('input[name="price"]').val('');

        $('#add-modal').modal('hide');
      });

      $('tbody').on('click', '.btn-delete', function() {
        const index = $(this).closest('tr').data('index');
        deleteItem(index);
      });

      loadItems();
    });
  </script>
</body>
</html>
